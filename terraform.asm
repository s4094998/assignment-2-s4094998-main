.ORIG x3000
TRAP 0x29  
TRAP 0x27


AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
STI R0, XVAL 
STI R2, ZVAL
STI R1, YVAL
JSR LOOPONE 
LDI R0, XVAL 
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPTWO
LDI R0, XVAL 
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPTHREE
LDI R0, XVAL 
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPFOUR
LDI R0, XVAL 
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPFIVE
LDI R0, XVAL 
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPSIX
LDI R0, XVAL 
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPSEVEN
LDI R0, XVAL
LDI R2, ZVAL
LDI R1, YVAL
JSR LOOPEIGHT
HALT 
 


LOOPONE
ADD R0, R0, #1 ; X + 1
ADD R2, R2, #1 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET 

LOOPTWO
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #-1 ; X -1
ADD R2, R2, #1 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

LOOPTHREE
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #0 ; X -1
ADD R2, R2, #1 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

LOOPFOUR
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #-1 ; X -1
ADD R2, R2, #0 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

LOOPFIVE
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #1 ; X -1
ADD R2, R2, #0 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

LOOPSIX
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #1 ; X -1
ADD R2, R2, #-1 ; Z + 1
TRAP 0x27
TRAP 0x2D 
TRAP 0x27
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
TRAP 0x27
ADD R4, R4, R5 ; Y - Y
TRAP 0x27
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

LOOPSEVEN
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #-1 ; X -1
ADD R2, R2, #-1 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL




HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

LOOPEIGHT
AND R4, R4, #0 
ADD R4, R1, #0 ; R4 <- Y
AND R5, R5, #0 
ADD R0, R0, #0 ; X -1
ADD R2, R2, #-1 ; Z + 1
TRAP 0x2D 
ADD R5, R1, #1; R5 <- Y
NOT R5, R5 
ADD R5, R5, #1 ; -Y 
ADD R4, R4, R5 ; Y - Y
BRp HEIGHTLARGER 
BRn HEIGHTSMALLER
BRz EQUAL



HEIGHTSMALLER 
LD R3, BLOCK_ID2
TRAP 0x2C 
ADD R1, R1, #-1
ADD R4, R4, #1 
BRn HEIGHTSMALLER
RET

HEIGHTLARGER 
ADD R1, R1, #1
LD R3, BLOCK_ID1
TRAP 0x2C 
ADD R4, R4, #-1 
BRp HEIGHTLARGER 
RET

EQUAL 
RET

HALT
XVAL .FILL x3100
ZVAL .FILL x3101
YVAL .FILL x3102
BLOCK_ID1 .FILL #4
BLOCK_ID2 .FILL #0 
.END


